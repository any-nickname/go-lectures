План занятия:
- Источники информации
- Введение
- Структура каталогов приложения
- Структура пакетов приложения
- Архитектура приложения
- Чистая архитектура
- Принципы **SOLID** в Go
- Монолит vs микросервисы
___
<h5>Источники информации</h5>
Книга **Clean Architecture** (Robert C. Martin)

**Ultimate Go Training** by Bill Kennedy
https://www.ardanlabs.com/ultimate-go/

**The Go Programming Language** (Alan A. A. Donovan, Brian W. Kernighan)

Книга **Microservices Patterns** (Chris Richardson)

https://martinfowler.com/microservices
___
<h5>Введение</h5>
**Проектирование и разработка ПО** — инженерная дисциплина, а не наука. Это означает, что нет железобетонных аксиом и теорема, а значит нет и единственного верного решения.

Мы обладаем сводом знаний, лучших практик, рекомендаций опытных специалистов, и эти компоненты могут противоречить друг другу.

Однако существуют рекомендации, подкреплённые разумными аргументами, и их можно рассматривать как правила.

Для каждого проекта следует выбрать набор правил, которыми будут руководствоваться все члены коллектива. Эти правила, может, и не обеспечат лучшее решение, но привнесут в проект стандарт работы, единообразие.

При очевидной неудаче, правила стоит пересмотреть.
___
<h5>Структура каталогов приложения</h5>
Все исполняемые пакеты размещаются в подкаталогах каталога "project/cmd" (в отдельных каталогах).

Общая кодовая база подключаемых пакетов размещается в подкаталогах каталога "project/internal" или "project/pkg".

Может потребоваться защитить некоторые подключаемые пакеты от импорта из внешних проектов. Такие пакеты следует разместить в подкаталогах каталога "project/internal". Компилятор не позволит импортировать такие пакеты снаружи каталога "project/".

Всё это — согласно популярному на гитхабе шаблону go-standard-project-layout (или как-то так).

Подключаемый пакет не должен завершать программу (т.е. не должен брать на себя управление приложением). То есть всё, что находится в подкаталогах "pkg" или "internal" не должно содержать `log.Fatal` и подобных конструкций, завершающих программу.
___
<h5>Структура пакетов приложения</h5>
Структура пакетов приложения должна повторять структуру самого приложения, при взгляде на структуру пакетов, должно быть понятно назначение приложения.

Если приложение имеет кэш, то должен существовать пакет для кэша. Если у приложения есть функциональность отчётов, должен существовать пакет для отчётов.

Вследствие этого, такие архитектуры как MVC, MVVM и иные плохо подходят, так как представляют приложение в виде обезличенных слоёв.

Также плохим решением является использование фреймворков, которые навязывают собственную структуру пакетов.

Подробнее: книга **Clean Architecture**, глава 21.
___
<h5>Архитектура приложения</h5>
Хорошая статья: https://martinfowler.com/architecture/

**Архитектура программного обеспечения** — совокупность важнейших решений об организации программной системы (Википедия).

Важнейшие решения включают в себя:
- Выбор технологического стека
- Использование стороннего ПО (БД, очереди, кэши и пр.)
- Договорённость о методике разработки (взаимодействие, стандарты кодирования и пр.)
- Принцип организации кода (структура пакетов, DI)
- Топология приложения

Архитектура влияет на следующие моменты:
- **Разработка**. Архитектура (как набор решений) должна упрощать и удешевлять разработку.
- **Развёртывание**. Архитектура должна способствовать максимально простому процессу развёртывания ПО.
- **Эксплуатация**. На этапе эксплуатации ПО влияние архитектуры минимально.
- **Сопровождение и развитие**. Архитектура должна упрощать процессы добавления нового функционала и поиска и исправления ошибок.
- Хорошая архитектура сосредоточена на политиках (policy, бизнес-правилах) и не зависит от деталей реализации (топология, СУБД, очереди, JSON, REST и т.д.)

42 минута
